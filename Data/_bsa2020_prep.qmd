
# British Social Attitudes Survey, 2020 (BSA2020)

This dataset comes from the [British Social Attitudes Survey (2020)](https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=9005). The data (bsa38, version 6) was downloaded in SPSS format to a local folder, `raw/bsa2020/`:

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false

# The folder, which also contains the original data documentation, looks like this:

fs::dir_info("raw/bsa2020")[, c(1,3)] |> gt::gt_preview() |> gt::cols_align(align = "left") |>
  gt::tab_options(table.width = "70%")

```

The SOC2069 version of the dataset can be reproduced from the raw data file with the `R` code shown in the expandable field below.

```{r}
#| warning: false
#| output: false
#| code-fold: true
#| code-summary: "Show the code"

## Packages (install first if needed) ----------------------------------------------------------------------------------------

library(here)           # Write paths to data relative to project directory on both Win and Mac
library(dplyr)          # Data wrangling
library(datawizard)     # All data import, export and wrangling
library(sjlabelled)     # Data import and label management

## Path to file --------------------------------------------------------------------------------------------------------------

datafile <- here("Data", "raw", "bsa2020", "bsa2020_archive.sav")

## Read in the data file -----------------------------------------------------------------------------------------------------

bsa2020 <- read_spss(datafile) |> 
  drop_labels() |>
  mutate(across(where(~ is.factor(.x) && nlevels(.x) > 9),
                as_numeric),                                                    # Turn long factors to labelled numeric
         across(c(TenureE, Spend1, Spend2, ChAttend, BestNatU2),
                as_factor)) |>                                                  # Long factors that should stay categorical
  set_labels(RespAgeE, PenExp2, 
             labels = "") |>                                                    # Pure numeric, no labels needed
  data_select(-c(serial, QnrVersion, NCOutcome, serialh, gor2, BSA20_wt_new,    # Technical variables
                 RemLeaCl, RetExpb, REconAct20, RetirAg3))                      # Too much detail


## Save the dataset for SOC2069 --------------------------------------------------------------------------------------

# rds
saveRDS(bsa2020, "for_analysis/bsa2020.rds", compress = "bzip2")

```


If you use the BSA2020 data in your work, cite it as follows:

  > NatCen Social Research. (2023). British Social Attitudes Survey, 2020. [data collection]. UK Data Service. SN: 9005, DOI: http://doi.org/10.5255/UKDA-SN-9005-1



## BSA2020 Codebook

```{r}
#| echo: false
#| message: false
#| warning: false


`SOC2069: British Social Attitudes Survey, 2020` <- bsa2020 

`SOC2069: British Social Attitudes Survey, 2020`  |> 
    data_codebook(variable_label_width = 50, 
                  value_label_width = 45,
                  max_values = 11,
                  range_at = 6) |> 
    print_html(font_size = "80%",
               line_padding = 0)
```

